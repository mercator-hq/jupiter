# Test Cases for simple-logging.yaml Policy
#
# These test cases verify that the simple logging policy correctly
# logs requests and allows them to proceed.
#
# Run with:
#   mercator test --policy examples/policies/simple-logging.yaml --tests examples/policies/tests/simple-logging-tests.yaml

tests:
  - name: "Allow basic chat completion request"
    description: "Verify that basic requests are logged and allowed"
    request:
      model: "gpt-3.5-turbo"
      messages:
        - role: "user"
          content: "Hello, how are you?"
    metadata:
      user_id: "test-user-123"
      request_id: "req-001"
    expect:
      action: "allow"
      logged: true

  - name: "Allow GPT-4 request"
    description: "Test that premium models are also allowed"
    request:
      model: "gpt-4"
      messages:
        - role: "user"
          content: "Explain quantum computing"
    metadata:
      user_id: "test-user-456"
      request_id: "req-002"
    expect:
      action: "allow"
      logged: true

  - name: "Allow Claude request"
    description: "Test that Claude models are allowed"
    request:
      model: "claude-3-opus"
      messages:
        - role: "user"
          content: "Write a poem"
    metadata:
      user_id: "test-user-789"
      request_id: "req-003"
    expect:
      action: "allow"
      logged: true

  - name: "Allow request with empty metadata"
    description: "Test that requests with minimal metadata are handled"
    request:
      model: "gpt-3.5-turbo"
      messages:
        - role: "user"
          content: "Test message"
    metadata: {}
    expect:
      action: "allow"
      logged: true
